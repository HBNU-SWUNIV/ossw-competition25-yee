from fastapi import APIRouter, Query
from typing import List, Dict, Optional

router = APIRouter(prefix="/data", tags=["data"])


# 한국 대학교 목록 (초기 정적 데이터)
UNIVERSITIES = [
    "한밭대학교",
    "서울대학교",
    "연세대학교",
    "고려대학교",
    "한국과학기술원",
    "포스텍",
    "성균관대학교",
    "한양대학교",
    "중앙대학교",
    "경희대학교",
    "이화여자대학교",
    "건국대학교",
    "홍익대학교",
    "동국대학교",
    "국민대학교",
    "아주대학교",
    "인하대학교",
    "전북대학교",
    "전남대학교",
    "경북대학교",
    "경상국립대학교",
    "충남대학교",
    "충북대학교",
    "강원대학교",
    "제주대학교"
]

# 학교별 학과 데이터 (초기 정적 데이터)
# 실제 데이터는 워크넷 LOD에서 가져와서 구축하거나, 초기에는 대표 학과만 제공
DEPARTMENTS_BY_SCHOOL = {
    "한밭대학교": [
        "컴퓨터공학과", "소프트웨어학과", "전자공학과", "전기공학과",
        "기계공학과", "산업공학과", "건축공학과", "토목공학과",
        "환경공학과", "화학공학과", "신소재공학과",
        "전기전자컴퓨터공학부", "메카트로닉스공학과", "IT융합공학과"
    ],
    "서울대학교": [
        "컴퓨터공학부", "전기정보공학부", "기계공학부", "항공우주공학과",
        "조선해양공학과", "재료공학부", "화학공학부", "생명과학부",
        "의과대학", "경영대학", "경제학부", "법학부",
        "문과대학", "사범대학"
    ],
    "연세대학교": [
        "컴퓨터과학과", "전기전자공학과", "기계공학과", "화학공학과",
        "생명공학과", "의과대학", "경영대학", "경제학과",
        "법학과", "문과대학", "음악대학"
    ],
    "고려대학교": [
        "컴퓨터학과", "전기전자공학부", "기계공학부", "산업경영공학부",
        "화학공학과", "의과대학", "경영대학", "경제학과",
        "법학과", "문과대학", "이과대학"
    ],
    "한국과학기술원": [
        "전산학부", "전기및전자공학부", "기계공학부", "항공우주공학과",
        "생명과학과", "화학과", "물리학과", "수학과",
        "지구환경공학과", "신소재공학과", "융합공학과"
    ],
    "포스텍": [
        "컴퓨터공학과", "전기전자공학과", "기계공학과", "화학공학과",
        "생명공학과", "신소재공학과", "산업경영공학과", "수학과",
        "물리학과", "화학과"
    ],
    "성균관대학교": [
        "컴퓨터학과", "전기전자공학과", "기계공학과", "화학공학과",
        "유기나노공학과", "시스템경영공학과", "의과대학", "경영대학",
        "경제학과", "법학과", "문과대학"
    ],
    "한양대학교": [
        "컴퓨터소프트웨어학부", "전기생체공학부", "기계공학부", "건축학부",
        "자원환경공학과", "화학공학과", "생명공학과", "의과대학",
        "경영대학", "경제금융학부", "법학과", "문과대학"
    ],
    "중앙대학교": [
        "컴퓨터공학부", "전자전기공학부", "기계공학부", "화학신소재공학부",
        "건축학부", "의과대학", "경영대학", "경제학부",
        "법학과", "문과대학", "사범대학"
    ],
    "경희대학교": [
        "컴퓨터공학과", "전자공학과", "기계공학과", "화학공학과",
        "생명공학과", "의과대학", "경영대학", "경제학과",
        "국어국문학과", "영어영문학과", "법학과"
    ],
    "이화여자대학교": [
        "컴퓨터공학과", "전기공학과", "화학신소재공학과", "수학과",
        "물리학과", "화학과", "생명과학과", "의과대학",
        "경영대학", "경제학과", "국어국문학과", "영어영문학과"
    ],
    "건국대학교": [
        "컴퓨터공학과", "전기공학과", "기계공학과", "화학공학과",
        "생명과학과", "의과대학", "경영대학", "경제학과",
        "법학과", "문과대학"
    ],
    "홍익대학교": [
        "컴퓨터공학과", "전기전자공학과", "기계공학과", "화학공학과",
        "건축공학과", "토목공학과", "산업경영공학과", "의과대학",
        "경영대학", "경제학과", "법학과"
    ],
    "동국대학교": [
        "컴퓨터공학과", "전자전기공학과", "기계공학과", "화학공학과",
        "건축공학과", "의과대학", "경영대학", "경제학과",
        "법학과", "문과대학", "불교학과"
    ],
    "국민대학교": [
        "컴퓨터공학과", "전자공학과", "기계공학과", "화학공학과",
        "건축공학과", "자동차공학과", "산업경영공학과", "경영대학",
        "경제학과", "법학과", "문과대학"
    ],
    "아주대학교": [
        "소프트웨어학과", "전자공학과", "기계공학과", "산업공학과",
        "화학공학과", "신소재공학과", "의과대학", "경영대학",
        "경제학과", "법학과"
    ],
    "인하대학교": [
        "컴퓨터공학과", "전자공학과", "기계공학과", "조선해양공학과",
        "산업경영공학과", "화학공학과", "의과대학", "경영대학",
        "경제학과", "법학과"
    ],
    "전북대학교": [
        "컴퓨터공학과", "전자정보공학과", "기계공학과", "건축공학과",
        "토목공학과", "화학공학과", "의과대학", "경영대학",
        "경제학과", "법학과", "사범대학"
    ],
    "전남대학교": [
        "컴퓨터공학과", "전자공학과", "기계공학과", "조선해양공학과",
        "화학공학과", "생명공학과", "의과대학", "경영대학",
        "경제학과", "법학과", "사범대학"
    ],
    "경북대학교": [
        "컴퓨터공학과", "전자공학과", "기계공학과", "건축공학과",
        "토목공학과", "화학공학과", "의과대학", "경영대학",
        "경제학과", "법학과", "사범대학"
    ],
    "경상국립대학교": [
        "컴퓨터공학과", "전자공학과", "기계공학과", "산업경영공학과",
        "토목공학과", "화학공학과", "생명공학과", "경영대학",
        "경제학과", "법학과"
    ],
    "충남대학교": [
        "컴퓨터공학과", "전기공학과", "기계공학과", "조선해양공학과",
        "화학공학과", "생명공학과", "의과대학", "경영대학",
        "경제학과", "법학과", "사범대학"
    ],
    "충북대학교": [
        "컴퓨터공학과", "전자공학과", "기계공학과", "화학공학과",
        "생명공학과", "신소재공학과", "경영대학", "경제학과",
        "법학과", "사범대학"
    ],
    "강원대학교": [
        "컴퓨터공학과", "전기전자공학과", "기계공학과", "토목공학과",
        "화학공학과", "생명공학과", "수의과대학", "경영대학",
        "경제학과", "법학과"
    ],
    "제주대학교": [
        "컴퓨터공학과", "전기공학과", "기계공학과", "해양생명과학과",
        "화학공학과", "생명공학과", "의과대학", "경영대학",
        "경제학과", "법학과"
    ]
}


# 기본 학과 목록 (학교별 학과가 없는 경우 사용)
DEFAULT_DEPARTMENTS = [
    "컴퓨터공학과",
    "소프트웨어학과",
    "전자공학과",
    "전기공학과",
    "기계공학과",
    "산업공학과",
    "건축공학과",
    "토목공학과",
    "환경공학과",
    "화학공학과",
    "신소재공학과",
    "바이오공학과",
    "수학과",
    "물리학과",
    "화학과",
    "생물학과",
    "경영학과",
    "경제학과",
    "회계학과",
    "마케팅학과",
    "국어국문학과",
    "영어영문학과",
    "사회학과",
    "심리학과",
    "행정학과",
    "법학과",
    "의학과",
    "간호학과",
    "약학과",
    "교육학과"
]


@router.get("/universities", response_model=List[str])
async def get_universities():
    """
    대학교 목록 조회
    
    Returns:
        대학교 목록 (가나다 순)
    """
    return sorted(UNIVERSITIES)


@router.get("/departments", response_model=List[str])
async def get_departments(school: Optional[str] = Query(None, description="학교명")):
    """
    학과 목록 조회
    
    Args:
        school: 학교명 (옵션)
    
    Returns:
        학과 목록 (가나다 순)
    """
    # 학교가 지정되면 해당 학교 학과 반환, 아니면 기본 목록
    if school and school in DEPARTMENTS_BY_SCHOOL:
        return sorted(DEPARTMENTS_BY_SCHOOL[school])
    return sorted(DEFAULT_DEPARTMENTS)


@router.get("/all")
async def get_all_data():
    """
    모든 데이터 한번에 조회
    
    Returns:
        대학교, 기본 학과 목록
    """
    return {
        "universities": sorted(UNIVERSITIES),
        "departments": sorted(DEFAULT_DEPARTMENTS)
    }


@router.get("/departments/by-school")
async def get_departments_by_school_map():
    """
    학교별 학과 매핑 전체 조회
    
    Returns:
        학교별 학과 매핑 데이터
    """
    return DEPARTMENTS_BY_SCHOOL
